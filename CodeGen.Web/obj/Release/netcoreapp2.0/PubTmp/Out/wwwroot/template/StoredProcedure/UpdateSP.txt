CREATE PROCEDURE #Name
(
  #Param
)
AS
BEGIN
BEGIN TRY
	BEGIN TRANSACTION;
	BEGIN		
		#Body
	END 	
	COMMIT TRANSACTION;
END TRY
BEGIN CATCH
	IF @@TRANCOUNT > 0
	ROLLBACK TRANSACTION;
	DECLARE @ErrorNumber INT = ERROR_NUMBER();
	DECLARE @ErrorLine INT = ERROR_LINE();
	DECLARE @ErrorMessage NVARCHAR(4000) = ERROR_MESSAGE();
	DECLARE @ErrorSeverity INT = ERROR_SEVERITY();
	DECLARE @ErrorState INT = ERROR_STATE();
	--print @ErrorMessage; print @ErrorLine
END CATCH
END
GO